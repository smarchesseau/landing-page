<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>ContentHub | Vitto AgTech</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet" />
    <link href="css/styles.css" rel="stylesheet" />
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light fixed-top shadow-sm" id="mainNav">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold" href="index.html">
                <img src="assets/img/LogoVittoSB.png" alt="Vitto AgTech Logo" style="height: 40px; margin-right: 10px;">
                Vitto AgTech
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation" id="navbar-toggler">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ms-auto me-4 my-3 my-lg-0">
                    <li class="nav-item">
                        <a class="nav-link me-lg-3" href="index.html" data-en="Back to Homepage" data-fr="Retour à l'accueil" data-es="Volver al inicio">Back to Homepage</a>
                    </li>
                    <li class="nav-item">
                        <div class="language-switcher" data-selected="en">
                            <select id="language-select" class="form-select" onchange="setLanguage(this.value); localStorage.setItem('selectedLanguage', this.value)">
                                <option value="en">English</option>
                                <option value="fr">Français</option>
                                <option value="es">Español</option>
                            </select>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <main class="container py-5" style="margin-top:80px;">
        <h1 class="mb-4 text-center" data-en="ContentHub" data-fr="ContentHub" data-es="ContentHub">ContentHub</h1>
        <p class="lead text-center mb-5"
           data-en="Here you'll find insights, podcasts and news about agricultural innovation, sustainability, and technology adoption. Full articles are available to read in our Vitto mobile app for farmers or Web App."
           data-fr="Vous trouverez ici des analyses, podcasts et des actualités sur l'innovation agricole, la durabilité et l'adoption de technologies. Les articles complets sont disponibles dans notre application mobile Vitto pour les agriculteurs ou application Web."
           data-es="Aquí encontrará informes, podcasts y noticias sobre innovación agrícola, sostenibilidad y adopción de tecnología. Los artículos completos estan disponibles en nuestra aplicación móvil Vitto para agricultores or nuestra web app.">
           Here you'll find insights, news, and stories about agricultural innovation, sustainability, and technology adoption. Full articles will be available to read in our Vitto mobile app for farmers (coming soon) in English, French, and Spanish.
        </p>
        <!-- Dynamic ContentHub sections -->
        <div class="row mb-4">
            <div class="col-12 d-flex justify-content-between align-items-end">
                <h4 class="mb-3" data-en="Our most recent podcasts" data-fr="Nos derniers podcasts" data-es="Nuestros últimos podcasts">Podcasts</h4>
            </div>
            <div id="contenthub-podcasts" class="row g-3"></div>
        </div>
        <div class="row mb-4">
            <div class="col-12 d-flex justify-content-between align-items-end">
                <h4 class="mb-3" data-en="Real‑World Validation Reports" data-fr="Rapports de validation terrain" data-es="Informes de validación en campo">Real‑World Validation Reports</h4>
            </div>
            <div id="contenthub-reports" class="row g-3"></div>
        </div>
        <div class="row mb-4">
            <div class="col-12 d-flex justify-content-between align-items-end">
                <h4 class="mb-3" data-en="Our Recent Articles" data-fr="Nos derniers articles" data-es="Nuestros últimos articulos">Our Articles</h4>
            </div>
            <div id="contenthub-articles" class="row g-3"></div>
        </div>
        <!-- End Dynamic ContentHub sections -->

    </main>
        <!-- Footer-->
        <footer class="bg-green text-white py-5">
            <div class="container px-5">
                <div class="row align-items-center mb-4">
                    <div class="col-lg-8 mb-3 mb-lg-0">
                        <h5 class="text-uppercase mb-2" data-en="Get the Vitto app for farmers" data-fr="Téléchargez l’app Vitto pour les agriculteurs" data-es="Descargue la app Vitto para agricultores">Get the Vitto app for farmers</h5>
                        <p class="mb-2" data-en="Your smart companion for better farming decisions." data-fr="Votre alliée pour de meilleures décisions agricoles." data-es="Su aliada para mejores decisiones agrícolas.">Your smart companion for better farming decisions.</p>
                       
                    </div>
                    <div class="col-lg-4 text-lg-end">
                        <div class="d-flex justify-content-start justify-content-lg-end align-items-center">
                            <a href="https://play.google.com/store/apps/details?id=com.stephyyyyy.VittoFarmerApp" target="_blank" rel="noopener" class="me-3" aria-label="Get it on Google Play">
                                <img src="assets/img/google-play-badge.svg" alt="Get it on Google Play" style="height: 56px;">
                            </a>
                            <a href="https://apps.apple.com/app/vitto-agtech/id6753060986" target="_blank" rel="noopener" class="me-3" aria-label="Download on the App Store">
                                <img src="assets/img/app-store-badge.svg" alt="Download on the App Store" style="height: 56px;">
                            </a>
                        </div>
                    </div>
                </div>
                <div class="row gx-5">
                    <div class="col-lg-4 mb-4 mb-lg-0">
                        <h5 class="text-uppercase mb-4" data-en="Vitto AgTech" data-fr="Vitto AgTech" data-es="Vitto AgTech">Vitto AgTech</h5>
                        <p class="mb-4" data-en="Unlock the Full Potential of Agriculture by Turning Innovation into Real-World Impact" 
                           data-fr="Libérez le Plein Potentiel de l'Agriculture en Transformant l'Innovation en Impact Concret" 
                           data-es="Desbloquea el Potencial Completo de la Agricultura Convirtiendo la Innovación en Impacto Real">
                            Unlock the Full Potential of Agriculture by Turning Innovation into Real-World Impact
                        </p>
                        <p class="small mb-1">
                            <a href="mailto:contact@vitto-tech.com" class="text-white text-decoration-none">
                                <i class="bi bi-envelope me-2"></i>contact@vitto-tech.com
                            </a>
                        </p>
                        <p class="mb-0">
                            <span class="me-2 fw-semibold" style="font-size: 1rem;" data-en="Follow us:" data-fr="Suivez-nous :" data-es="Síguenos:">Follow us:</span>
                            <a href="https://www.linkedin.com/company/vitto-tech/" target="_blank" rel="noopener" class="text-white text-decoration-none me-3" aria-label="LinkedIn">
                                <i class="bi bi-linkedin" style="font-size: 1.4rem; color: #0A66C2;"></i>
                            </a>
                            <a href="https://www.facebook.com/profile.php?id=61579552833754" target="_blank" rel="noopener" class="text-white text-decoration-none me-3" aria-label="Facebook">
                                <i class="bi bi-facebook" style="font-size: 1.4rem;"></i>
                            </a>
                            <a href="https://www.instagram.com/vittoagtech?igsh=aXR0Y3ZwyzM17Gk0&utm_source=qr" target="_blank" rel="noopener" class="text-white text-decoration-none" aria-label="Instagram">
                                <i class="bi bi-instagram" style="font-size: 1.4rem;"></i>
                            </a>
                        </p>
                    </div>
                    <div class="col-lg-4 mb-4 mb-lg-0">
                        <h5 class="text-uppercase mb-4" data-en="Quick Links" data-fr="Liens Rapides" data-es="Enlaces Rápidos">Quick Links</h5>
                        <ul class="list-unstyled mb-0">
                            <li class="mb-2"><a href="index.html#farmers" class="text-white text-decoration-none" data-en="For Farmers" data-fr="Pour les Agriculteurs" data-es="Para Agricultores">For Farmers</a></li>
                            <li class="mb-2"><a href="index.html#organizations" class="text-white text-decoration-none" data-en="For Organizations" data-fr="Pour les Organisations" data-es="Para Organizaciones">For Organizations</a></li>
                            <li class="mb-2"><a href="index.html#innovators" class="text-white text-decoration-none" data-en="For Innovators" data-fr="Pour les Innovateurs" data-es="Para Innovadores">For Innovators</a></li>
                            <li class="mb-2"><a href="index.html#about" class="text-white text-decoration-none" data-en="About Us" data-fr="À propos de nous" data-es="Sobre nosotros">About Us</a></li>
                            <li class="mb-2"><a href="articles.html" class="text-white text-decoration-none" data-en="Our Articles" data-fr="Nos Articles" data-es="Nuestros Artículos">Our Articles</a></li>

                        </ul>
                    </div>
                    <div class="col-lg-4">
                        <h5 class="text-uppercase mb-4" data-en="Legal" data-fr="Légal" data-es="Legal">Legal</h5>
                        <ul class="list-unstyled mb-0">
                            <li class="mb-2"><a href="privacy-policy.html" class="text-white text-decoration-none" data-en="Privacy Policy" data-fr="Politique de Confidentialité" data-es="Política de Privacidad">Privacy Policy</a></li>
                            <li class="mb-2"><a href="sitemap.xml" class="text-white text-decoration-none" data-en="Sitemap" data-fr="Plan du site" data-es="Mapa del sitio">Sitemap</a></li>
                        </ul>
                    </div>
                </div>
                <hr class="my-4 bg-white">
                <div class="row">
                    <div class="col-md-12 text-center">
                        <p class="small mb-0" data-en="&copy; 2025 Vitto AgTech. All rights reserved. Not incorporated." data-fr="&copy; 2025 Vitto AgTech. Tous droits réservés. " data-es="&copy; 2025 Vitto AgTech. Todos los derechos reservados.">&copy; 2025 Vitto AgTech. All rights reserved.</p>
                    </div>
                </div>
            </div>
        </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/scripts.js"></script>
    <script>
function setLanguage(lang) {
    document.querySelector('.language-switcher').setAttribute('data-selected', lang);
    document.querySelectorAll('[data-en], [data-fr], [data-es]').forEach(function(el) {
        if (el.hasAttribute('data-' + lang)) {
            el.textContent = el.getAttribute('data-' + lang);
        }
    });
    document.documentElement.lang = lang;
    // Truncate short-texts for selected language
    document.querySelectorAll('.card-text.short-text').forEach(function(el) {
        var full = el.getAttribute('data-' + lang);
        if (full.length > 250) {
            el.textContent = full.substring(0, 250) + '...';
        } else {
            el.textContent = full;
        }
    });
    // Hide full-texts
    document.querySelectorAll('.card-text.full-text').forEach(function(el) {
        el.classList.add('d-none');
    });
    // Reset Read More button text
    document.querySelectorAll('.read-more-btn').forEach(function(btn) {
        btn.textContent = btn.getAttribute('data-' + lang);
    });
}
document.querySelectorAll('.read-more-btn').forEach(function(btn) {
    btn.addEventListener('click', function(e) {
        e.preventDefault();
        var cardBody = btn.closest('.card-body');
        var lang = document.documentElement.lang || 'en';
        var fullText = cardBody.querySelector('.card-text.full-text');
        var shortText = cardBody.querySelector('.card-text.short-text');
        if (fullText.classList.contains('d-none')) {
            fullText.textContent = fullText.getAttribute('data-' + lang);
            fullText.classList.remove('d-none');
            shortText.classList.add('d-none');
            btn.textContent = btn.getAttribute('data-showless-' + lang);
        } else {
            fullText.classList.add('d-none');
            shortText.classList.remove('d-none');
            btn.textContent = btn.getAttribute('data-' + lang);
        }
    });
});
window.addEventListener('DOMContentLoaded', function() {
    // Try to get language from localStorage (set from index.html)
    var lang = localStorage.getItem('selectedLanguage') || 'en';
    document.getElementById('language-select').value = lang;
    setLanguage(lang);
    // Load dynamic ContentHub from pre-generated JSON (built via GitHub Actions)
    (function() {
        var APP_BASE_URL = window.APP_BASE_URL || 'https://app.vitto-tech.com';
        var langSel = document.getElementById('language-select');
        var getLang = function() { return langSel?.value || 'en'; };
        var getLocalized = function(obj, fallback) {
            fallback = fallback || '';
            if (!obj) return fallback;
            if (typeof obj === 'string') return obj;
            var l = getLang();
            return obj[l] || obj.en || fallback;
        };
        var getYoutubeId = function(url) {
            if (!url) return null;
            try {
                var u = new URL(url);
                if (u.hostname.indexOf('youtu.be') !== -1) {
                    var seg = u.pathname.split('/').filter(Boolean)[0];
                    return seg || null;
                }
                if (u.hostname.indexOf('youtube.com') !== -1) {
                    if (u.pathname.indexOf('/watch') === 0) return u.searchParams.get('v');
                    if (u.pathname.indexOf('/embed/') === 0) return (u.pathname.split('/')[2] || null);
                }
            } catch(e) {}
            return null;
        };
        var card = function(item) {
            var imageHtml = item.image
                ? '<img src="'+item.image+'" class="card-img-top" alt="cover" style="height: '+(item.imageHeight || '160px')+'; object-fit: cover;">'
                : '<div class="d-flex align-items-center justify-content-center" style="height:160px;"><i class="bi bi-file-earmark-text" style="font-size:2rem; color:#6c757d;"></i></div>';
            var text = (item.summary || '').toString();
            // Target a fixed total length (title + summary) for consistent card fill
            var titleLen = (item.title || '').length;
            var totalBudget = 400;                    // total characters budget for title + summary
            var minSummary = 160;                     // ensure at least this many chars for summary
            var limit = Math.max(minSummary, totalBudget - titleLen);
            var sliced = text.length > limit ? (text.substring(0, limit) + '…') : text;
            return '<div class="col-md-4">'+
                '<div class="card h-100 shadow-sm">'+
                imageHtml+
                '<div class="card-body d-flex flex-column">'+
                '<h5 class="card-title">'+(item.title || '')+'</h5>'+
                '<p class="card-text">'+sliced+'</p>'+
                '<a href="'+item.href+'" target="_blank" rel="noopener" class="btn btn-success mt-auto">'+(item.ctaText || 'Open')+'</a>'+
                (item.showImageCredit ? '<small class="text-muted mt-2" style="font-size:0.8rem; display:block;">*Images by FreePix</small>' : '')+
                '</div></div></div>';
        };
        var renderInto = function(containerId, items) {
            var el = document.getElementById(containerId);
            if (!el) return;
            el.innerHTML = (items || []).slice(0,3).map(card).join('');
        };

        function mapAndRender(json) {
            var podcasts = (json.podcasts || []).map(function(p) {
                var title = getLocalized(p.title_multilingual || p.title, p.title || '');
                var summary = getLocalized(p.summary_multilingual || p.summary, p.summary || '');
                var yt = getYoutubeId(p.link);
                var image = yt ? ('https://img.youtube.com/vi/'+yt+'/hqdefault.jpg') : null;
                var href = APP_BASE_URL + '/podcast/' + p.id;
                var l = getLang();
                var cta = (l === 'fr') ? 'Voir dans notre application' : (l === 'es') ? 'Ver en nuestra app' : 'View in our app';
                return { title: title, summary: summary, image: image, href: href, imageHeight: '220px', ctaText: cta };
            });
            var reports = (json.reports || []).map(function(r) {
                var title = getLocalized(r.title, r.title || '');
                var summary = getLocalized(r.summary, r.summary || '');
                var href = APP_BASE_URL + '/report/' + r.id;
                var l = getLang();
                var cta = (l === 'fr') ? 'Voir dans notre application' : (l === 'es') ? 'Ver en nuestra app' : 'View in our app';
                return { title: title, summary: summary, image: r.image || null, href: href, ctaText: cta, imageHeight: '240px', showImageCredit: true };
            });
            var articles = (json.articles || []).map(function(a) {
                var title = getLocalized(a.title, a.title || '');
                var summary = getLocalized(a.summary, a.summary || '');
                var href = APP_BASE_URL + '/generated-article/' + a.id;
                var l = getLang();
                var cta = (l === 'fr') ? 'Voir dans notre application' : (l === 'es') ? 'Ver en nuestra app' : 'View in our app';
                return { title: title, summary: summary, image: a.image || null, href: href, ctaText: cta, imageHeight: '240px', showImageCredit: true };
            });
            renderInto('contenthub-podcasts', podcasts);
            renderInto('contenthub-reports', reports);
            renderInto('contenthub-articles', articles);
        }

        function loadJSON() {
            fetch('assets/contenthub.json', { cache: 'no-store' })
                .then(function(r) { return r.json(); })
                .then(function(json) {
                    window.CONTENTHUB_DATA = json;
                    mapAndRender(json);
                })
                .catch(function() {
                    mapAndRender({ podcasts: [], reports: [], articles: [] });
                });
        }

        loadJSON();
        if (langSel) langSel.addEventListener('change', function() {
            if (window.CONTENTHUB_DATA) {
                mapAndRender(window.CONTENTHUB_DATA);
            } else {
                loadJSON();
            }
        });
    })();
});
</script>
<style>
@media (max-width: 767.98px) {
    .article-list .col-md-4 {
        flex: 0 0 100%;
        max-width: 100%;
    }
}
</style>
</body>
</html>
